"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showBadge=exports.load=exports.hideBadge=exports.execute=exports["default"]=void 0;var _eventemitter=_interopRequireDefault(require("eventemitter3"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var scriptId="recaptcha-frontend";var badgeStyleId="recaptcha-frontend-badge";var cachedSiteKey=null;var readyEmitter=new _eventemitter["default"];window.handleRecaptchaLoad=function(){readyEmitter.emit("ready");readyEmitter.removeAllListeners("ready")};var showBadge=exports.showBadge=function showBadge(){var badgeStyle=document.getElementById(badgeStyleId);if(badgeStyle){document.head.removeChild(badgeStyle)}};var hideBadge=exports.hideBadge=function hideBadge(){if(!document.getElementById(badgeStyleId)){var badgeStyle=document.createElement("style");badgeStyle.id=badgeStyleId;badgeStyle.innerHTML=".grecaptcha-badge { visibility: hidden; }";document.head.appendChild(badgeStyle)}};var load=exports.load=function load(siteKey){var recaptchaNet=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return new Promise(function(resolve,reject){var _window=window,grecaptcha=_window.grecaptcha;if(grecaptcha){resolve()}else if(document.getElementById(scriptId)){readyEmitter.addListener("ready",function(){resolve()})}else{var script=document.createElement("script");readyEmitter.addListener("ready",function(){cachedSiteKey=siteKey;resolve()});var handleScriptError=function handleScriptError(){script.removeEventListener("error",handleScriptError);reject()};script.id=scriptId;script.type="text/javascript";script.src="https://".concat(recaptchaNet?"www.recaptcha.net":"www.google.com","/recaptcha/api.js?onload=handleRecaptchaLoad&render=").concat(siteKey);script.async=true;script.defer=true;script.addEventListener("error",handleScriptError);document.head.appendChild(script)}})};var execute=exports.execute=function execute(action,siteKey){var recaptchaNet=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return new Promise(function(resolve,reject){siteKey=siteKey||cachedSiteKey;load(siteKey,recaptchaNet).then(function(){window.grecaptcha.execute(siteKey,{action:action}).then(resolve)})["catch"](reject)})};var _default=exports["default"]=execute;